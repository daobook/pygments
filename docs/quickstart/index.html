
<!DOCTYPE html>

<html lang="zh_CN">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" /><meta name="generator" content="Docutils 0.17.1: http://docutils.sourceforge.net/" />

    <title>简介和快速入门 &#8212; Pygments</title>
    <link rel="stylesheet" type="text/css" href="../../_static/pygments.css" />
    <link rel="stylesheet" type="text/css" href="../../_static/pygments14.css" />
    <script data-url_root="../../" id="documentation_options" src="../../_static/documentation_options.js"></script>
    <script src="../../_static/jquery.js"></script>
    <script src="../../_static/underscore.js"></script>
    <script src="../../_static/doctools.js"></script>
    <script src="../../_static/translations.js"></script>
    <link rel="shortcut icon" href="../../_static/favicon.ico"/>
    <link rel="index" title="索引" href="../../genindex/" />
    <link rel="search" title="搜索" href="../../search/" />
    <link rel="next" title="命令行界面" href="../cmdline/" />
    <link rel="prev" title="下载和安装" href="../../download/" />
    <link href='https://fonts.googleapis.com/css?family=PT+Sans:300,400,700'
          rel='stylesheet' type='text/css'>
 
    <style type="text/css">
      table.right { float: right; margin-left: 20px; }
      table.right td { border: 1px solid #ccc; }
      
    </style>
    <script type="text/javascript">
      // intelligent scrolling of the sidebar content
      $(window).scroll(function() {
        var sb = $('.sphinxsidebarwrapper');
        var win = $(window);
        var sbh = sb.height();
        var offset = $('.sphinxsidebar').position()['top'];
        var wintop = win.scrollTop();
        var winbot = wintop + win.innerHeight();
        var curtop = sb.position()['top'];
        var curbot = curtop + sbh;
        // does sidebar fit in window?
        if (sbh < win.innerHeight()) {
          // yes: easy case -- always keep at the top
          sb.css('top', $u.min([$u.max([0, wintop - offset - 10]),
                                $(document).height() - sbh - 200]));
        } else {
          // no: only scroll if top/bottom edge of sidebar is at
          // top/bottom edge of window
          if (curtop > wintop && curbot > winbot) {
            sb.css('top', $u.max([wintop - offset - 10, 0]));
          } else if (curtop < wintop && curbot < winbot) {
            sb.css('top', $u.min([winbot - sbh - offset - 20,
                                  $(document).height() - sbh - 200]));
          }
        }
      });
    </script>

  </head><body>
<div class="outerwrapper">
<div class="pageheader">
  <ul>
    <li><a href="../../">Home</a></li>
    
    <li><a href="../../demo/">Demo</a></li>
    
    <li><a href="../../languages/">Languages</a></li>
    <li><a href="../../styles/">Styles</a></li>
    <li><a href="../../faq/">FAQ</a></li>
    <li><a href="../../download/">Get it</a></li>
    <li><a href="../">Docs</a></li>
  </ul>
  <div>
    <a href="../../">
      <img src="../../_static/logo.png" alt="Pygments logo" />
    </a>
  </div>
</div>
<div class="flexwrapper">

      <div class="sphinxsidebar" role="navigation" aria-label="main navigation">
        <div class="sphinxsidebarwrapper">
  <div>
    <h3><a href="../../">目录</a></h3>
    <ul>
<li><a class="reference internal" href="#">简介和快速入门</a><ul>
<li><a class="reference internal" href="#architecture">架构</a></li>
<li><a class="reference internal" href="#example">示例</a></li>
<li><a class="reference internal" href="#options">选项</a></li>
<li><a class="reference internal" href="#lexer-and-formatter-lookup">lexer 和 formatter 查询</a></li>
<li><a class="reference internal" href="#guessing-lexers">猜测词库</a></li>
<li><a class="reference internal" href="#command-line-usage">命令行用法</a></li>
</ul>
</li>
</ul>

  </div>
<div>
  <h4>上一个主题</h4>
  <p class="topless"><a href="../../download/"
                        title="上一章">下载和安装</a></p>
</div>
<div>
  <h4>下一个主题</h4>
  <p class="topless"><a href="../cmdline/"
                        title="下一章">命令行界面</a></p>
</div>
  <div role="note" aria-label="source link">
    <h3>本页</h3>
    <ul class="this-page-menu">
      <li><a href="../../_sources/docs/quickstart.rst.txt"
            rel="nofollow">显示源代码</a></li>
    </ul>
   </div>
<div id="searchbox" style="display: none" role="search">
  <h3 id="searchlabel">快速搜索</h3>
    <div class="searchformwrapper">
    <form class="search" action="../../search/" method="get">
      <input type="text" name="q" aria-labelledby="searchlabel" autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false"/>
      <input type="submit" value="转向" />
    </form>
    </div>
</div>
<script>$('#searchbox').show(0);</script>
        </div>
      </div>

    <div class="document">
      <div class="documentwrapper">
        <div class="bodywrapper">
          <div class="body" role="main">
            
  <section id="introduction-and-quickstart">
<h1>简介和快速入门<a class="headerlink" href="#introduction-and-quickstart" title="永久链接至标题">¶</a></h1>
<p>欢迎来到 Pygments！本文档解释了基本概念和术语，并给出了一些如何使用该库的例子。</p>
<section id="architecture">
<h2>架构<a class="headerlink" href="#architecture" title="永久链接至标题">¶</a></h2>
<p>有四种类型的组件一起工作，高亮一段代码：</p>
<ul class="simple">
<li><p><strong>lexer</strong> 将源文件分割成形符，即源文件的片段，其形符类型决定了文本在语义上代表什么（例如，关键字、字符串或注释）。Pygments 支持的每种语言或形符格式都有一个 lexer。</p></li>
<li><p>形符流可以通过 <strong>filters</strong>，这些过滤器通常会修改形符类型或文本片段，例如将所有关键词大写。</p></li>
<li><p>然后，一个 <strong>formatter</strong> 接收形符流，并将其写入一个输出文件，格式为 HTML、LaTeX 或 RTF。</p></li>
<li><p>在编写输出时，一个 <strong>style</strong> 决定了如何高亮所有不同的标记类型。它将它们映射到诸如 “red and bold” 等属性</p></li>
</ul>
</section>
<section id="example">
<h2>示例<a class="headerlink" href="#example" title="永久链接至标题">¶</a></h2>
<p>下面是一个高亮 Python 代码的小例子：</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">pygments</span> <span class="kn">import</span> <span class="n">highlight</span>
<span class="kn">from</span> <span class="nn">pygments.lexers</span> <span class="kn">import</span> <span class="n">PythonLexer</span>
<span class="kn">from</span> <span class="nn">pygments.formatters</span> <span class="kn">import</span> <span class="n">HtmlFormatter</span>

<span class="n">code</span> <span class="o">=</span> <span class="s1">&#39;print &quot;Hello World&quot;&#39;</span>
<span class="nb">print</span><span class="p">(</span><span class="n">highlight</span><span class="p">(</span><span class="n">code</span><span class="p">,</span> <span class="n">PythonLexer</span><span class="p">(),</span> <span class="n">HtmlFormatter</span><span class="p">()))</span>
</pre></div>
</div>
<p>它的打印结果是这样的：</p>
<div class="highlight-html notranslate"><div class="highlight"><pre><span></span><span class="p">&lt;</span><span class="nt">div</span> <span class="na">class</span><span class="o">=</span><span class="s">&quot;highlight&quot;</span><span class="p">&gt;</span>
<span class="p">&lt;</span><span class="nt">pre</span><span class="p">&gt;&lt;</span><span class="nt">span</span> <span class="na">class</span><span class="o">=</span><span class="s">&quot;k&quot;</span><span class="p">&gt;</span>print<span class="p">&lt;/</span><span class="nt">span</span><span class="p">&gt;</span> <span class="p">&lt;</span><span class="nt">span</span> <span class="na">class</span><span class="o">=</span><span class="s">&quot;s&quot;</span><span class="p">&gt;</span><span class="ni">&amp;quot;</span>Hello World<span class="ni">&amp;quot;</span><span class="p">&lt;/</span><span class="nt">span</span><span class="p">&gt;&lt;/</span><span class="nt">pre</span><span class="p">&gt;</span>
<span class="p">&lt;/</span><span class="nt">div</span><span class="p">&gt;</span>
</pre></div>
</div>
<p>正如你所看到的，Pygments 使用 CSS 类（默认情况下，但你可以改变）而不是内联样式，以避免重复输出多余的样式信息。一个包含所有可能在输出中使用的 CSS 类的 CSS 样式表可以通过以下方式产生：</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="nb">print</span><span class="p">(</span><span class="n">HtmlFormatter</span><span class="p">()</span><span class="o">.</span><span class="n">get_style_defs</span><span class="p">(</span><span class="s1">&#39;.highlight&#39;</span><span class="p">))</span>
</pre></div>
</div>
<p><code class="xref py py-func docutils literal notranslate"><span class="pre">get_style_defs()</span></code> 的参数被用作额外的 CSS 选择器：输出可能看起来像这样：</p>
<div class="highlight-css notranslate"><div class="highlight"><pre><span></span><span class="p">.</span><span class="nc">highlight</span><span class="w"> </span><span class="p">.</span><span class="nc">k</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="k">color</span><span class="p">:</span><span class="w"> </span><span class="mh">#AA22FF</span><span class="p">;</span><span class="w"> </span><span class="k">font-weight</span><span class="p">:</span><span class="w"> </span><span class="kc">bold</span><span class="w"> </span><span class="p">}</span><span class="w"></span>
<span class="p">.</span><span class="nc">highlight</span><span class="w"> </span><span class="p">.</span><span class="nc">s</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="k">color</span><span class="p">:</span><span class="w"> </span><span class="mh">#BB4444</span><span class="w"> </span><span class="p">}</span><span class="w"></span>
<span class="o">...</span><span class="w"></span>
</pre></div>
</div>
</section>
<section id="options">
<h2>选项<a class="headerlink" href="#options" title="永久链接至标题">¶</a></h2>
<p><code class="xref py py-func docutils literal notranslate"><span class="pre">highlight()</span></code> 函数支持第四个参数，称为 <em>outfile</em>，如果给出的话，它必须是一个文件对象。然后，格式化的输出将被写入这个文件，而不是作为一个字符串返回。</p>
<p>Lexers 和 formatters 都支持选项。它们作为关键字参数被提供给类或查找方法：</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">pygments</span> <span class="kn">import</span> <span class="n">highlight</span>
<span class="kn">from</span> <span class="nn">pygments.lexers</span> <span class="kn">import</span> <span class="n">get_lexer_by_name</span>
<span class="kn">from</span> <span class="nn">pygments.formatters</span> <span class="kn">import</span> <span class="n">HtmlFormatter</span>

<span class="n">lexer</span> <span class="o">=</span> <span class="n">get_lexer_by_name</span><span class="p">(</span><span class="s2">&quot;python&quot;</span><span class="p">,</span> <span class="n">stripall</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
<span class="n">formatter</span> <span class="o">=</span> <span class="n">HtmlFormatter</span><span class="p">(</span><span class="n">linenos</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span> <span class="n">cssclass</span><span class="o">=</span><span class="s2">&quot;source&quot;</span><span class="p">)</span>
<span class="n">result</span> <span class="o">=</span> <span class="n">highlight</span><span class="p">(</span><span class="n">code</span><span class="p">,</span> <span class="n">lexer</span><span class="p">,</span> <span class="n">formatter</span><span class="p">)</span>
</pre></div>
</div>
<p>这使得 lexer 从输入中去除所有前导和尾部的空白（<cite>stripall</cite> 选项），让 formatter 输出行号（<cite>linenos</cite> 选项），并将包装的 <code class="docutils literal notranslate"><span class="pre">&lt;div&gt;</span></code> 的类设置为 <code class="docutils literal notranslate"><span class="pre">source</span></code> （而不是 <code class="docutils literal notranslate"><span class="pre">highlight</span></code>）。</p>
<p>重要的选项包括：</p>
<dl class="simple">
<dt><cite>encoding</cite><span class="classifier">用于 lexers 和 formatters</span></dt><dd><p>Since Pygments uses Unicode strings internally, this determines which
encoding will be used to convert to or from byte strings.</p>
</dd>
<dt><cite>style</cite><span class="classifier">用于 formatters</span></dt><dd><p>编写输出时要使用的样式名称。</p>
</dd>
</dl>
<p>关于内建 lexer 和 formatter 及其选项的概述，请访问 <a class="reference internal" href="../lexers/"><span class="doc">lexer</span></a> 和 <a class="reference internal" href="../formatters/"><span class="doc">formatters</span></a> 列表。</p>
<p>关于过滤器的文档，见 <a class="reference internal" href="../filters/"><span class="doc">this page</span></a>。</p>
</section>
<section id="lexer-and-formatter-lookup">
<h2>lexer 和 formatter 查询<a class="headerlink" href="#lexer-and-formatter-lookup" title="永久链接至标题">¶</a></h2>
<p>如果你想通过别名或文件名来查询一个内置的 lexer，你可以使用以下方法之一：</p>
<div class="highlight-pycon notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span> <span class="nn">pygments.lexers</span> <span class="kn">import</span> <span class="p">(</span><span class="n">get_lexer_by_name</span><span class="p">,</span>
<span class="gp">... </span>    <span class="n">get_lexer_for_filename</span><span class="p">,</span> <span class="n">get_lexer_for_mimetype</span><span class="p">)</span>

<span class="gp">&gt;&gt;&gt; </span><span class="n">get_lexer_by_name</span><span class="p">(</span><span class="s1">&#39;python&#39;</span><span class="p">)</span>
<span class="go">&lt;pygments.lexers.PythonLexer&gt;</span>

<span class="gp">&gt;&gt;&gt; </span><span class="n">get_lexer_for_filename</span><span class="p">(</span><span class="s1">&#39;spam.rb&#39;</span><span class="p">)</span>
<span class="go">&lt;pygments.lexers.RubyLexer&gt;</span>

<span class="gp">&gt;&gt;&gt; </span><span class="n">get_lexer_for_mimetype</span><span class="p">(</span><span class="s1">&#39;text/x-perl&#39;</span><span class="p">)</span>
<span class="go">&lt;pygments.lexers.PerlLexer&gt;</span>
</pre></div>
</div>
<p>所有这些函数都接受关键字参数；它们将作为选项传递给 lexer。</p>
<p>类似的 API 可用于 formatter：使用来自 <a class="reference internal" href="../api/#module-pygments.formatters" title="pygments.formatters"><code class="xref py py-mod docutils literal notranslate"><span class="pre">pygments.formatters</span></code></a> 模块的 <a class="reference internal" href="../api/#pygments.formatters.get_formatter_by_name" title="pygments.formatters.get_formatter_by_name"><code class="xref py py-func docutils literal notranslate"><span class="pre">get_formatter_by_name()</span></code></a> 和 <a class="reference internal" href="../api/#pygments.formatters.get_formatter_for_filename" title="pygments.formatters.get_formatter_for_filename"><code class="xref py py-func docutils literal notranslate"><span class="pre">get_formatter_for_filename()</span></code></a>，用于此目的。</p>
</section>
<section id="guessing-lexers">
<h2>猜测词库<a class="headerlink" href="#guessing-lexers" title="永久链接至标题">¶</a></h2>
<p>如果你不知道文件的内容，或者你想高亮一个扩展名不明确的文件，如 <code class="docutils literal notranslate"><span class="pre">.html</span></code> （可能包含纯 HTML 或一些模板标签），请使用这些函数：</p>
<div class="highlight-pycon notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span> <span class="nn">pygments.lexers</span> <span class="kn">import</span> <span class="n">guess_lexer</span><span class="p">,</span> <span class="n">guess_lexer_for_filename</span>

<span class="gp">&gt;&gt;&gt; </span><span class="n">guess_lexer</span><span class="p">(</span><span class="s1">&#39;#!/usr/bin/python</span><span class="se">\n</span><span class="s1">print &quot;Hello World!&quot;&#39;</span><span class="p">)</span>
<span class="go">&lt;pygments.lexers.PythonLexer&gt;</span>

<span class="gp">&gt;&gt;&gt; </span><span class="n">guess_lexer_for_filename</span><span class="p">(</span><span class="s1">&#39;test.py&#39;</span><span class="p">,</span> <span class="s1">&#39;print &quot;Hello World!&quot;&#39;</span><span class="p">)</span>
<span class="go">&lt;pygments.lexers.PythonLexer&gt;</span>
</pre></div>
</div>
<p><a class="reference internal" href="../api/#pygments.lexers.guess_lexer" title="pygments.lexers.guess_lexer"><code class="xref py py-func docutils literal notranslate"><span class="pre">guess_lexer()</span></code></a> 将给定的内容传递给词库类的 <code class="xref py py-meth docutils literal notranslate"><span class="pre">analyse_text()</span></code> 方法，并返回其返回最高数字的那个。</p>
<p>所有的词库都有两个不同的文件名模式列表：主要的和次要的。<a class="reference internal" href="../api/#pygments.lexers.get_lexer_for_filename" title="pygments.lexers.get_lexer_for_filename"><code class="xref py py-func docutils literal notranslate"><span class="pre">get_lexer_for_filename()</span></code></a> 函数只使用主列表，其条目在所有词库中应该是唯一的。<a class="reference internal" href="../api/#pygments.lexers.guess_lexer_for_filename" title="pygments.lexers.guess_lexer_for_filename"><code class="xref py py-func docutils literal notranslate"><span class="pre">guess_lexer_for_filename()</span></code></a>，然而，将首先循环浏览所有词库，如果文件名匹配，则查看主和次的文件名模式。如果只有一个词库匹配，它将被返回，否则 <a class="reference internal" href="../api/#pygments.lexers.guess_lexer" title="pygments.lexers.guess_lexer"><code class="xref py py-func docutils literal notranslate"><span class="pre">guess_lexer()</span></code></a> 的猜测机制将与匹配的词库一起使用。</p>
<p>像往常一样，这些函数的关键字参数被作为选项提供给创建的词库。</p>
</section>
<section id="command-line-usage">
<h2>命令行用法<a class="headerlink" href="#command-line-usage" title="永久链接至标题">¶</a></h2>
<p>你可以从命令行使用 Pygments，使用 <strong class="program">pygmentize</strong> 脚本</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>$ pygmentize test.py
</pre></div>
</div>
<p>将使用 ANSI 转义序列（又称终端颜色）突出显示 Python 文件 test.py，并将结果打印到标准输出。</p>
<p>要输出HTML，使用 <code class="docutils literal notranslate"><span class="pre">-f</span></code> 选项</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>$ pygmentize -f html -o test.html test.py
</pre></div>
</div>
<p>将 test.py 的 HTML 高亮版本写到 test.html 文件中。注意，它将只是一个 HTML 片段，如果你想要一个完整的 HTML 文档，请使用 “full” 选项</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>$ pygmentize -f html -O full -o test.html test.py
</pre></div>
</div>
<p>这将产生一个包含样式表的完整 HTML 文档。</p>
<p>可以用 <code class="docutils literal notranslate"><span class="pre">-O</span> <span class="pre">style=&lt;name&gt;</span></code> 来选择一种风格。</p>
<p>如果你需要一个使用 Pygments CSS 类的现有 HTML 文件的样式表，可以用</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>$ pygmentize -S default -f html &gt; style.css
</pre></div>
</div>
<p>其中 <code class="docutils literal notranslate"><span class="pre">default</span></code> 是风格名称。</p>
<p>更多的选项和技巧可以在 <a class="reference internal" href="../cmdline/"><span class="doc">命令行参考</span></a> 中找到。</p>
</section>
</section>


            <div class="clearer"></div>
          </div>
        </div>
      </div>
      <div class="clearer"></div>
    </div>
    </div> 
    <div class="footer" role="contentinfo">
      &copy; Copyright 2006-2021, Georg Brandl and Pygments contributors.
      Created using <a href="https://sphinx-doc.org/">Sphinx</a> 4.3.1. <br/>
      Pygments logo created by <a href="https://joelunger.com">Joel Unger</a>.
      Backgrounds from <a href="https://subtlepatterns.com">subtlepatterns.com</a>.
    </div>
  </div> 

  </body>
</html>